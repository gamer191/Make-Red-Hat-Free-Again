"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4620],{49332:(e,t,a)=>{a.d(t,{Z:()=>c});var r=a(76687),s=a(3357),n=a(55312),o=a(52010);class c extends r.PureComponent{render(){const{searchQuery:e,linkButton:t,setSearchQuery:a,target:r,placeholder:c="Search by name or type"}=this.props,i={href:null==t?void 0:t.href,disabled:null==t?void 0:t.disabled};return r&&(i.target=r),(0,o.jsxs)("div",{className:"page-action-bar",children:[(0,o.jsx)("div",{className:"gf-form gf-form--grow",children:(0,o.jsx)(s.H,{value:e,onChange:a,placeholder:c})}),t&&(0,o.jsx)(n.Qj,Object.assign({},i,{children:t.title}))]})}}},69902:(e,t,a)=>{a.d(t,{c:()=>b});var r,s,n,o=a(77813),c=a(76687),i=a(27668),u=a(3351),d=a(29327),l=a(97726),h=a(58601),g=a(31271),f=a(352),x=a(74284),p=a(49332),S=a(52010);function j(){const e=(0,f.I0)(),t=(0,c.useCallback)((t=>e((0,x.zT)(t))),[e]),a=(0,f.v9)((e=>{let{dataSources:t}=e;return(0,x.IO)(t)})),r=g.Vt.hasPermission(f.bW.DataSourcesCreate);return(0,S.jsx)(m,{searchQuery:a,setSearchQuery:t,canCreateDataSource:r})}function m(e){let{searchQuery:t,setSearchQuery:a,canCreateDataSource:r}=e;const s={href:(0,x.d7)().New,title:"Add data source",disabled:!r};return(0,S.jsx)(p.Z,{searchQuery:t,setSearchQuery:a,linkButton:s},"action-bar")}function b(){(0,x.zJ)();const e=(0,f.v9)((e=>(0,x.mt)(e.dataSources))),t=(0,f.v9)((e=>{let{dataSources:t}=e;return(0,x.r7)(t)})),a=(0,f.v9)((e=>{let{dataSources:t}=e;return t.hasFetched})),r=g.Vt.hasPermission(f.bW.DataSourcesCreate);return(0,S.jsx)(v,{dataSources:e,dataSourcesCount:t,isLoading:!a,hasCreateRights:r})}function v(e){let{dataSources:t,dataSourcesCount:a,isLoading:o,hasCreateRights:c}=e;const g=(0,i.yK)(y),f=(0,x.d7)();return o?r||(r=(0,S.jsx)(h.Z,{})):0===a?(0,S.jsx)(l.Z,{buttonDisabled:!c,title:"No data sources defined",buttonIcon:"database",buttonLink:f.New,buttonTitle:"Add data source",proTip:"You can also define data sources through configuration files.",proTipLink:"http://docs.grafana.org/administration/provisioning/#datasources?utm_source=grafana_ds_list",proTipLinkTitle:"Learn more",proTipTarget:"_blank"}):(0,S.jsxs)(S.Fragment,{children:[s||(s=(0,S.jsx)(j,{})),(0,S.jsx)("ul",{className:g.list,children:t.map((e=>(0,S.jsx)("li",{children:(0,S.jsxs)(u.Z,{href:f.Edit.replace(/:uid/gi,e.uid),children:[(0,S.jsx)(u.Z.Heading,{children:e.name}),(0,S.jsx)(u.Z.Figure,{children:(0,S.jsx)("img",{src:e.typeLogoUrl,alt:"",height:"40px",width:"40px",className:g.logo})}),(0,S.jsx)(u.Z.Meta,{children:[e.typeName,e.url,e.isDefault&&(n||(n=(0,S.jsx)(d.V,{name:"default",colorIndex:1},"default-tag")))]})]})},e.uid)))})]})}const y=()=>({list:(0,o.css)({listStyle:"none",display:"grid"}),logo:(0,o.css)({objectFit:"contain"})})},7312:(e,t,a)=>{a.r(t),a.d(t,{DataSourcesListPage:()=>c,default:()=>i});a(76687);var r,s=a(28781),n=a(69902),o=a(52010);function c(){return r||(r=(0,o.jsx)(s.T,{navId:"datasources",children:(0,o.jsx)(s.T.Contents,{children:(0,o.jsx)(n.c,{})})}))}const i=c},74284:(e,t,a)=>{a.d(t,{Vj:()=>o,rl:()=>E.rl,mt:()=>x.mt,r7:()=>x.r7,IO:()=>x.IO,I5:()=>x.I5,BX:()=>E.BX,Ht:()=>E.Ht,zT:()=>E.zT,yr:()=>E.yr,nH:()=>v,wl:()=>C,IA:()=>D,Qs:()=>T,YY:()=>Q,_l:()=>k,MF:()=>w,d7:()=>Z,q6:()=>I,E:()=>p,wi:()=>m,OU:()=>b,zJ:()=>j,hw:()=>S,qj:()=>y});var r=a(54533),s=a(76687),n=a(46648);const o=(0,s.createContext)(n.n);var c=a(85994),i=a(77829),u=a(33225),d=a(31271),l=a(3276),h=a(352),g=a(80410),f=a(66932),x=a(77863);const p=e=>{const t=(0,h.I0)();(0,s.useEffect)((()=>(t((0,r.M9)(e)),function(){t((0,i.e)({cleanupAction:e=>e.dataSourceSettings}))})),[e,t])},S=e=>{const t=(0,h.I0)();return()=>t((0,r.kY)(e))},j=()=>{const e=(0,h.I0)();(0,s.useEffect)((()=>{e((0,r.bZ)())}),[e])},m=e=>{const t=(0,h.I0)();(0,s.useEffect)((()=>{t((0,r.gv)(e))}),[t,e])},b=()=>{const e=(0,h.I0)();(0,s.useEffect)((()=>{e((0,r.Kj)())}),[e])},v=()=>{const e=(0,h.I0)(),t=Z();return a=>{e((0,r.J_)(a,t.Edit))}},y=()=>{const e=(0,h.I0)();return async t=>e((0,r.oe)(t))},I=()=>{const e=(0,h.I0)(),{name:t}=(0,h.v9)((e=>e.dataSources.dataSource));return()=>{u.Z.publish(new g.VJ({title:"Delete",text:`Are you sure you want to delete the "${t}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>e((0,r.F5)())}))}},C=e=>(0,h.v9)((t=>(0,x.f6)(t.dataSources,e))),D=e=>{const t=C(e),a=JSON.stringify({datasource:t.name,context:"explore"});return c.Cj.renderUrl("/explore",{left:a})},T=e=>(0,h.v9)((t=>(0,x.G4)(t.dataSources,e))),k=()=>(0,h.v9)((e=>e.dataSourceSettings)),w=(e,t)=>{const a=C(e),{plugin:r,loadError:s,loading:n}=k(),o=(0,h.v9)((e=>e.navIndex)),c=t?`datasource-${t}-${e}`:`datasource-settings-${e}`;if(s){const e={text:s,subTitle:"Data Source Error",icon:"exclamation-triangle"};return{node:e,main:e}}return n||!r?(0,l.h)(o,c,(0,f.xG)("settings")):(0,l.h)(o,c,(0,f.nI)((0,f.B1)(a,r),t||"settings"))},Q=e=>{const t=C(e);return{readOnly:!0===t.readOnly,hasWriteRights:d.Vt.hasPermissionInMetadata(h.bW.DataSourcesWrite,t),hasDeleteRights:d.Vt.hasPermissionInMetadata(h.bW.DataSourcesDelete,t)}},Z=()=>(0,s.useContext)(o);var E=a(49682)}}]);
//# sourceMappingURL=DataSourcesListPage.7660d12d989d0d0a0d12.js.map